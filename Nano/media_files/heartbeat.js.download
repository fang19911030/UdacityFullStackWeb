(function(g){var window=this;var Bua=function(a){try{return g.Ic(a)}catch(b){return null}},i9=function(a){g.X.call(this,{K:"div",
X:"ytp-offline-slate",R:[{K:"div",X:"ytp-offline-slate-bar",R:[{K:"span",X:"ytp-offline-slate-icon",R:[g.rE?{K:"div",fa:["ytp-icon","ytp-icon-live-icon"]}:{K:"svg",Z:{fill:"#fff",height:"100%",viewBox:"0 0 24 24",width:"100%"},R:[{K:"path",Z:{d:"M16.94 6.91l-1.41 1.45c.9.94 1.46 2.22 1.46 3.64s-.56 2.71-1.46 3.64l1.41 1.45c1.27-1.31 2.05-3.11 2.05-5.09s-.78-3.79-2.05-5.09zM19.77 4l-1.41 1.45C19.98 7.13 21 9.44 21 12.01c0 2.57-1.01 4.88-2.64 6.54l1.4 1.45c2.01-2.04 3.24-4.87 3.24-7.99 0-3.13-1.23-5.96-3.23-8.01zM7.06 6.91c-1.27 1.3-2.05 3.1-2.05 5.09s.78 3.79 2.05 5.09l1.41-1.45c-.9-.94-1.46-2.22-1.46-3.64s.56-2.71 1.46-3.64L7.06 6.91zM5.64 5.45L4.24 4C2.23 6.04 1 8.87 1 11.99c0 3.13 1.23 5.96 3.23 8.01l1.41-1.45C4.02 16.87 3 14.56 3 11.99s1.01-4.88 2.64-6.54z"}},
{K:"circle",Z:{cx:"12",cy:"12",r:"3"}}]}]},{K:"span",X:"ytp-offline-slate-messages",R:[{K:"div",X:"ytp-offline-slate-main-text",R:["{{maintext}}"]},{K:"div",X:"ytp-offline-slate-subtitle-text",R:["{{subtitletext}}"]}]}]},{K:"div",X:"ytp-offline-slate-final-day",R:[{K:"div",X:"ytp-offline-slate-final-day-line-1",R:["Dawn of"]},{K:"div",X:"ytp-offline-slate-final-day-line-2",R:["The Final Day"]},{K:"div",X:"ytp-offline-slate-final-day-line-3",R:["-24 Hours Remain-"]}]}]});this.g=a;this.A=null;this.V(a,
"presentingplayerstatechange",this.B);this.V(a,"livestatedata",this.C);this.na();a=this.g.getVideoData();a.getPlayerResponse()&&(a=a.getPlayerResponse().playabilityStatus)&&this.C(a)},k9=function(a){g.IV.call(this,a);
this.H=!1;this.J=0;this.F=!1;this.o=window.NaN;this.B=this.A=null;this.C=!1;this.D=null;this.G=new g.oM(this);g.M(this,this.G);var b=new g.ZS(1E3,0x7ffffffffffff,{priority:0,namespace:"heartbeat"});g.xV(a,[b]);b=this.g.getVideoData();if(b.Ca){var c=g.Y(this.g);g.nO()?c.experiments.g("live_fresca_v2")&&!g.zM(c)&&(this.H=this.C=!0,this.D=new i9(this.g),g.M(this,this.D),g.CV(this.g,this.D.element,5),(b=b.getPlayerResponse())&&b.playabilityStatus&&(this.B=b.playabilityStatus),this.B?j9(this,7500):j9(this,
1E3)):g.qU(this.g.app.o,"html5.unsupportedlive","YTP_HTML5_NO_AVAILABLE_FORMATS_FALLBACK","nolive.1")}this.G.V(a,"heartbeatparams",this.sR);this.G.V(a,"presentingplayerstatechange",this.tR);this.G.V(a,"videoplayerreset",this.SN);this.G.V(a,"crn_heartbeat",this.rR);this.C&&this.B&&Cua(this,this.B)},Dua=function(a){a=a.g.getVideoData();
return!(!a.Ma||!a.Ma.Rc)&&!a.Jq},l9=function(a){var b=a.g.getVideoData();
return Dua(a)?!!a.A:!!b.heartbeatToken},j9=function(a,b){if(!a.o&&a.H){var c=a.g.getVideoData();
if(l9(a)||c.Ca)c=b,void 0==c&&(c=a.F?a.C?7500:a.A?1E3*a.A.interval:a.g.getVideoData().heartbeatInterval||6E4:1E3),a.o=g.WE((0,g.z)(a.TO,a),c)}},Cua=function(a,b){var c=a.g.getVideoData();
if(!g.lV(a.g).qb()||g.YQ(c)||a.g.isPeggedToLive()){var d=b.liveStreamability&&b.liveStreamability.liveStreamabilityRenderer&&b.liveStreamability.liveStreamabilityRenderer.streamTransitionEndpoint&&b.liveStreamability.liveStreamabilityRenderer.streamTransitionEndpoint.watchEndpoint.videoId;d?g.T2(a.g.app,d,void 0,void 0,!0,!0):"OK"==b.status.toUpperCase()&&(!c.hlsvp&&!c.ke||a.B&&b.liveStreamability.liveStreamabilityRenderer.broadcastId!=a.B.liveStreamability.liveStreamabilityRenderer.broadcastId?(d=
{video_id:c.videoId},c.isLiveDestination&&(d.is_live_destination="1"),a.g.oo(d)):g.BV(a.g,"heartbeat"))}},m9=function(a,b,c){if(a.o){a.o=window.NaN;
a.J++;var d=a.g.getVideoData();(d.heartbeatSoftFail?0:a.J>=(a.A?a.A.g:d.heartbeatRetries||5))?(d=g.U("YTP_ERROR_LICENSE"),g.qU(a.g.app.o,b?"heartbeat.net":"heartbeat.servererror",d,c)):j9(a)}},n9=function(a){a.J=0;
a.o&&(g.UE(a.o),a.o=window.NaN);a.F=!1},Eua=/^GLS\/1.0 (\d+) (\w+).*?\r\n\r\n([\S\s]*)$/;
g.A(i9,g.X);
i9.prototype.C=function(a){var b=a&&a.liveStreamability&&a.liveStreamability.liveStreamabilityRenderer.offlineSlate;if(b){var c=void 0!=b.liveStreamOfflineSlateRenderer.subtitleText?g.DQ(b.liveStreamOfflineSlateRenderer.subtitleText):"",d=void 0!=b.liveStreamOfflineSlateRenderer.mainText?g.DQ(b.liveStreamOfflineSlateRenderer.mainText):"";this.update({maintext:d,subtitletext:c});g.T(this.element,"ytp-offline-slate-single-text-line",!c);c=this.element;b&&b.liveStreamOfflineSlateRenderer&&b.liveStreamOfflineSlateRenderer.scheduledStartTime?
(b=b.liveStreamOfflineSlateRenderer.scheduledStartTime-(0,g.E)()/1E3,b=86400>=b&&86340<b):b=!1;g.T(c,"ytp-offline-slate-show-final-day",b);if(b=a&&a.liveStreamability&&a.liveStreamability.liveStreamabilityRenderer&&a.liveStreamability.liveStreamabilityRenderer.offlineSlate&&a.liveStreamability.liveStreamabilityRenderer.offlineSlate.liveStreamOfflineSlateRenderer&&a.liveStreamability.liveStreamabilityRenderer.offlineSlate.liveStreamOfflineSlateRenderer.thumbnail){for(var c=0,d=null,e=0;e<b.thumbnails.length;e++)b.thumbnails[e].width>
c&&(c=b.thumbnails[e].width,d=b.thumbnails[e].url);d&&(this.element.style.backgroundImage="url("+d+")")}else this.element.style.backgroundImage="";this.A=a}else this.A=null;this.B()};
i9.prototype.B=function(){var a=g.lV(this.g),b=this.g.getVideoData(),c=b.Ca&&(g.fK(a)||g.V(a,2)||g.V(a,64)),a=a.qb()&&!g.YQ(b)&&!this.g.isPeggedToLive();c&&!a&&this.A&&"LIVE_STREAM_OFFLINE"==this.A.status.toUpperCase()?this.o||(this.show(),this.g.U("offlineslatestatechange")):this.o&&this.na()};
g.A(k9,g.IV);g.h=k9.prototype;g.h.P=function(){n9(this);k9.O.P.call(this);g.AV(this.g,"heartbeat")};
g.h.rR=function(){this.H=!0;j9(this,2E3)};
g.h.sR=function(a){this.A=a;j9(this,2E3)};
g.h.tR=function(a){g.V(a.state,2)||g.V(a.state,64)?(n9(this),this.C&&(this.H=!0,j9(this,1E3))):(g.V(a.state,1)||g.V(a.state,8))&&j9(this,2E3)};
g.h.SN=function(){3!==this.g.Xa()&&j9(this,2E3)};
g.h.TO=function(){var a,b,c=g.Y(this.g),d=this.g.getVideoData();b=c.baseYtUrl;if(3==this.g.Xa())this.o=window.NaN;else if(g.V(g.lV(this.g),4))this.o=window.NaN;else if(l9(this)||d.Ca){if(!Dua(this)||d.Ca){a="GET";var e=c.C,c={video_id:d.videoId,heartbeat_token:d.heartbeatToken,c:e.c,cver:e.cver,cbrand:e.cbrand,cmodel:e.cmodel,vvt:d.Vf,mdx_environment:d.mdxEnvironment,access_token:d.oauthToken,forced_experiments:c.forcedExperiments};(e=g.KQ(d))&&(c.uloc=e);(e=this.g.nh().ingestionTime)&&(c.ingestion_time=
e);b=g.Gg(b+"heartbeat",c)}else a="GET",b=g.Gg(this.A.url,{request_id:g.SO()}),d.Vf&&(b=g.Gg(b,{vvt:d.Vf}),d.mdxEnvironment&&(b=g.Gg(b,{mdx_environment:d.mdxEnvironment}))),d.oauthToken&&(b=g.Gg(b,{access_token:d.oauthToken}));b=g.Gg(b,{cpn:d.clientPlaybackNonce});g.iF(b,{format:"RAW",method:a,timeout:3E4,Jb:(0,g.z)(this.iI,this),onError:(0,g.z)(this.hI,this),gd:(0,g.z)(this.jI,this),withCredentials:!0})}else n9(this)};
g.h.iI=function(a){if(this.o){a=a.responseText;var b=Bua(a),c;b?(this.g.xa("onHeartbeat",b),c="ok"==b.status?b.stop_heartbeat?2:0:"stop"==b.status?1:"live_stream_offline"==b.status?0:-1):c=(c=a.match(Eua))?"0"==c[1]?0:1:-1;if(-1==c)m9(this,!1,"decode");else if(2!=c||l9(this))if(this.J=0,this.o=window.NaN,1==c){this.F=!1;b=this.g;c="YTP_ERROR_LICENSE";var d=Bua(a);d?a=d.reason||g.U(c):((a=a.match(Eua))&&(a=(0,window.parseInt)(a[1],10))&&(c=g.AJ(a)),a=g.U(c));g.qU(b.app.o,"heartbeat.stop",a,void 0)}else this.F=
!0,this.C&&b&&(Cua(this,b),this.g.U("livestatedata",b)),j9(this);else n9(this),this.F=!0}};
g.h.hI=function(a){m9(this,!0,"net-"+a.status)};
g.h.jI=function(){m9(this,!0,"timeout")};
g.h.qR=function(){return!!this.D&&this.D.o};
window._exportCheck==g.Ca&&g.t("ytmod.player.heartbeat",k9,void 0);})(_yt_player);
